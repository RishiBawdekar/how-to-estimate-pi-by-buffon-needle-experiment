<!DOCTYPE html>
<html lang="en-us">

<head>

	<meta charset="UTF-8">
	<title>[DEMO]How to estimate π by using Buffon's needle experiment? by Rishi Bawdekar</title>
	<meta property="og:title" content="[DEMO]How to estimate π by using Buffon's needle experiment? by Rishi Bawdekar">
	<link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<link rel="shortcut icon" type="image/png" href="https://rishibawdekar.github.io/how-to-estimate-pi-by-buffon-needle-experiment/favicon.png?">
	<link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css">

</head>

<body>

    <div id="overlay"></div>
	<div id="popup">
		<div class="popupcontent">
			<h1 id="heading">How to estimate π ?</h1>
			<iframe id="ivideo" width="560" height="315" src="https://www.youtube.com/embed/d_OcLFZx9c4" frameborder="0" allowfullscreen></iframe>
			<br>
			<p id="op">You can press <i>Estimate PI</i> or press <i>Enter</i> to start simulation.</p>
			<br>
			<button type="button" id="butclose" onclick="CloseOverLay()">Got it!</button>
		</div>
	</div>

    <div id="top">
		<form id="form1" style="display:inline">
			 <select id = "trials" onkeypress="return searchKeyPress(event);">
				 <option value=0>      Select number of pins....</option>
				 <option value=10>     10  </option>
				 <option value=100>    100  </option>
				 <option value=1000>   1000  </option>
				 <option value=10000>  10000   </option>
			 </select>
			 <label id="label1"> Enter length of pin: <input type="text" id="pinlen" placeholder="length not more than 50"/></label>
			 <button type="button" id="begexp" onclick="BeginExperiment()">Estimate PI</button>
		 </form>
	</div>
	
	<div id="bottom">
	
	<div id="botleft">
		<br></br>
		<canvas id="buffoncanvas" width="300" height="300" style="border:1px solid #d3d3d3;"></canvas>
		<br></br>
		<div id="pins">Total number of pins: </div>
		<br>
		<div id="calpie">Calculated value of pi: </div>
		<br>
		<div id="Pi">Exact value of pi: </div>
		<br>
		<div id="perer">Percentage error: </div>
		<br>
		<div id="lByd">(l / d) ratio:  </div>
	</div>
	
	<div id="botRig">
		<br></br>
		<p>
		In 1777, French mathematician Georges-Louis Leclerc, later Comte de Buffon (born on 7th September 1707) asked the following question:
		<br></br>
		Suppose you drop a short needle on a ruled paper – what is the probability that the needle comes to lie in a position where it crosses one of the lines?
		<br></br>
		<div id="eq1"><b><font color="red" size="4px">Probability (p) : (2 / π) * (l / d)</font></b></div>
		<br></br>
		A short needle is a needle whose length (l) is smaller than the distance between two parallel lines on the ruler (d). The probability depends on the 
		ratio – l / d. Since the length is smaller than the distance, the needle will cross only one line on the ruler.
		</p>
		<p>
		So, if I drop N needles and C out of them cross a line, my probability is C / N. Replacing and re-structuring the above equation we get:
		<br></br>
		<div id="eq2"><b><font color="red" size="4px"> π = 2 * (l / d) * (N / C)</font></b></div>
		<br></br>
		This method is a type of Monte Carlo methods. 
		</p>
		<p>
		The value of π is an approximation and the success of this method depends on two factors:
		<br>
		<ol>
			<li>
			The ratio (l / d): In 1901, Italian mathematician Mario Lazzarini dropped a needle 3408 times and got success 1808 times. He chose (l / d) ratio as (5 / 6). 
			The experiment yielded an approximation of  π correct to six digits – 3.1415929.
			</li>
			<br>
			<li>
			Number of runs: More trials will yield better approximations.
			</li>
	    </ol>
		</p>
	</div>
	
	</div>


	
</body>

<script type="text/javascript">

    var distance = 50;
	var startpos = 50;
	var addToStart = 50;
	var ys = [50, 100, 150, 200, 250];
	//console.log(ys);
	var canvas = document.getElementById("buffoncanvas").getContext("2d");
	for (i = 0; i < 5; i++)
	{
	    canvas.beginPath();
		canvas.moveTo(0, startpos);
		canvas.lineTo(300, startpos);
		canvas.stroke();
		startpos += addToStart;
	}
	var minAngle = 0;
	var maxAngle = Math.PI * 2;
	var count = 0;
	var pinhistory = [];
	
	function BeginExperiment ()
	{
		var NoOfpins = document.getElementById("trials").options[document.getElementById("trials").selectedIndex].value;
		if (NoOfpins == 0) {alert("Please select number of pins."); return}
		pinhistory.push(Number(NoOfpins));
		var canvaspins = document.getElementById("buffoncanvas").getContext("2d");
		var canvascir = document.getElementById("buffoncanvas").getContext("2d");
		document.getElementById("buffoncanvas").getContext("2d").strokeStyle="#FF0000";
		document.getElementById("buffoncanvas").getContext("2d").lineWidth=2;
		var pinlength = document.getElementById("pinlen").value.trim();
	        if (pinlength == "")  {alert("Please enter length of pin <= 50."); return}
		if (Number(pinlength) > 50) {alert("Length of pin should be less or equal to 50."); return}
		if (Number(pinlength) == 0) {alert("Length of pin cannot be zero!."); return}
		for (i = 0; i < NoOfpins; i++)
		{
			var randangle = Math.random()*(maxAngle - minAngle + 1) + minAngle; // generate random angles between 0 and 360 in degree
			var randx1 = Math.floor(Math.random()*(275 - 25 + 1) + 25);
			var randy1 = Math.floor(Math.random()*(275 - 25 + 1) + 25);
			var randx2 = randx1 + Math.floor(pinlength * Math.sin(randangle));
			var randy2 = randy1 + Math.floor(pinlength * Math.cos(randangle));
			canvaspins.beginPath();
			canvaspins.moveTo(randx1, randy1); // generate random x and y
			canvaspins.lineTo(randx2, randy2); // randx2 = rcos and randy2 = rsin
			canvaspins.stroke();
			canvascir.arc(randx1, randy1, 2, minAngle, maxAngle);
			canvascir.fill();
			var miny = Math.min(randy1, randy2);
			var maxy = Math.max(randy1, randy2);
			for (j = 0; j < 5; j++)
			{
				if ((miny <= ys[j]) && (ys[j] <= maxy))
				{
					count++;
				}
			}
		}
		var totalpins = Sum(pinhistory);
		var probability = count / totalpins;
		var pie = (2 * Number(pinlength)) / (probability * distance);
		var error = ((Math.abs(Math.PI - pie) / Math.PI) * 100).toFixed(2);
		document.getElementById("pins").innerHTML = "Total number of pins: " + totalpins;
		document.getElementById("calpie").innerHTML = "Calculated value of pi: " + pie;
		document.getElementById("Pi").innerHTML =  "Exact value of pi: " + Math.PI;
		document.getElementById("perer").innerHTML = "Percentage error: " + error;
		document.getElementById("lByd").innerHTML = "(l / d) ratio: " + Number(pinlength) / distance;
	}
	
	function CloseOverLay()
	{
		document.getElementById("overlay").style.display = "none";
		document.getElementById("popup").style.display = "none";
	}
	
	function Sum(array) 
	{
		var total = 0;
		for (k = 0; k < array.length; k++)
		{
			total += array[k];
		}
		return total
	}
	
	$(document).keyup(function(e) 
	{
		// look for window.event in case event isn't passed in
		e = e || window.event;
		if (e.keyCode == 13)
		{
			BeginExperiment();
		}
        });
	
	
</script>
</html>
